<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objetivos - Plan Estrat√©gico CRUB 2026-2028</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .og-blue { border-left-color: #3b82f6; }
        .og-blue h4 { color: #3b82f6; }
        .og-green { border-left-color: #10b981; }
        .og-green h4 { color: #10b981; }
        .og-orange { border-left-color: #f97316; }
        .og-orange h4 { color: #f97316; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">Plan Estrat√©gico CRUB</div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="fundamentacion.html">Fundamentaci√≥n</a></li>
                <li><a href="objetivos.html" class="active">Objetivos</a></li>
                <li><a href="normativa.html">Normativa</a></li>
                <li><a href="recursos.html">Recursos</a></li>
                <li><a href="cronograma.html">Planificaci√≥n</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        <div class="title-with-button">
            <h1>B.5 Objetivos Generales</h1>
            <a href="#" class="btn-download" data-pdf-link target="_blank" rel="noopener">üìÑ Ver Propuesta en texto</a>
        </div>

        <section>
            <div id="ogList" class="objectives-list"></div>
        </section>

                <div class="title-with-button">
            <h1>B.6 Objetivos Espec√≠ficos</h1>
            <a href="#" class="btn-download" data-pdf-link target="_blank" rel="noopener">üìÑ Ver Propuesta en texto</a>
        </div>

        <section>
            <div id="oeList" class="objectives-list"></div>
        </section>

        <nav class="page-nav">
            <div class="page-nav-container">
                <a href="fundamentacion.html" class="btn-nav btn-nav-prev">
                    <span>Anterior</span>
                    <span class="nav-title">‚Üê Fundamentaci√≥n</span>
                </a>
                <a href="normativa.html" class="btn-nav btn-nav-next">
                    <span>Siguiente</span>
                    <span class="nav-title">Normativa ‚Üí</span>
                </a>
            </div>
        </nav>
    </main>

    <footer>
        <p>&copy; 2026 Plan Estrat√©gico Administraci√≥n Acad√©mica CRUB - Universidad Nacional del Comahue</p>
    </footer>
    <script src="menu.js"></script>
    <script src="config.js"></script>
    <script src="planificacion.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const ogContainer = document.getElementById('ogList');
            const oeContainer = document.getElementById('oeList');

            if (window.SITE_CONFIG?.pdfUrl) {
                document.querySelectorAll('[data-pdf-link]').forEach(a => { a.href = window.SITE_CONFIG.pdfUrl; });
            }

            try {
                const rawData = await getNormalizedPlanData();

                ogContainer.innerHTML = rawData.map(og => {
                    const ogClass = ogClassForId(og.id);
                    return `
                        <div class="objective-item ${ogClass}">
                            <h4>${escapeHTML(og.id)}</h4>
                            <p>${escapeHTML(og.description)}</p>
                        </div>
                    `;
                }).join('');

                const allOEs = rawData.flatMap(og =>
                    (og.specific_objectives || []).map(oe => ({ ...oe, ogId: og.id }))
                );

                oeContainer.innerHTML = allOEs.map(oe => {
                    const ogClass = ogClassForId(oe.ogId);
                    return `
                        <div class="objective-item ${ogClass}">
                            <h4>${escapeHTML(oe.id)}</h4>
                            <p>${escapeHTML(oe.details || oe.short_desc || '')}</p>
                        </div>
                    `;
                }).join('');
            } catch (err) {
                ogContainer.innerHTML = `<div class="objective-item og-blue"><h4>Error</h4><p>No se pudo cargar planificacion.json.</p></div>`;
                oeContainer.innerHTML = '';
                console.error(err);
            }
        });
    </script>
</body>
</html>
